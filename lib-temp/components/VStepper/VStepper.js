// Styles
import './VStepper.sass';
// Extensions
import VSheet from '../VSheet';
// Mixins
import { provide as RegistrableProvide } from '../../mixins/registrable';
import Proxyable from '../../mixins/proxyable';
// Utilities
import mixins from '../../util/mixins';
import { breaking } from '../../util/console';
const baseMixins = mixins(VSheet, RegistrableProvide('stepper'), Proxyable);
/* @vue/component */
export default baseMixins.extend({
    name: 'v-stepper',
    provide() {
        return {
            stepClick: this.stepClick,
            isVertical: this.vertical,
        };
    },
    props: {
        altLabels: Boolean,
        nonLinear: Boolean,
        flat: Boolean,
        vertical: Boolean,
    },
    data() {
        const data = {
            isBooted: false,
            steps: [],
            content: [],
            isReverse: false,
        };
        data.internalLazyValue = this.value != null
            ? this.value
            : (data[0] || {}).step || 1;
        return data;
    },
    computed: {
        classes() {
            return {
                'v-stepper--flat': this.flat,
                'v-stepper--is-booted': this.isBooted,
                'v-stepper--vertical': this.vertical,
                'v-stepper--alt-labels': this.altLabels,
                'v-stepper--non-linear': this.nonLinear,
                ...VSheet.options.computed.classes.call(this),
            };
        },
        styles() {
            return {
                ...VSheet.options.computed.styles.call(this),
            };
        },
    },
    watch: {
        internalValue(val, oldVal) {
            this.isReverse = Number(val) < Number(oldVal);
            oldVal && (this.isBooted = true);
            this.updateView();
        },
    },
    created() {
        /* istanbul ignore next */
        if (this.$listeners.input) {
            breaking('@input', '@change', this);
        }
    },
    mounted() {
        this.updateView();
    },
    methods: {
        register(item) {
            if (item.$options.name === 'v-stepper-step') {
                this.steps.push(item);
            }
            else if (item.$options.name === 'v-stepper-content') {
                item.isVertical = this.vertical;
                this.content.push(item);
            }
        },
        unregister(item) {
            if (item.$options.name === 'v-stepper-step') {
                this.steps = this.steps.filter((i) => i !== item);
            }
            else if (item.$options.name === 'v-stepper-content') {
                item.isVertical = this.vertical;
                this.content = this.content.filter((i) => i !== item);
            }
        },
        stepClick(step) {
            this.$nextTick(() => (this.internalValue = step));
        },
        updateView() {
            for (let index = this.steps.length; --index >= 0;) {
                this.steps[index].toggle(this.internalValue);
            }
            for (let index = this.content.length; --index >= 0;) {
                this.content[index].toggle(this.internalValue, this.isReverse);
            }
        },
    },
    render(h) {
        return h(this.tag, {
            staticClass: 'v-stepper',
            class: this.classes,
            style: this.styles,
        }, this.$slots.default);
    },
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVlN0ZXBwZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi9zcmMvY29tcG9uZW50cy9WU3RlcHBlci9WU3RlcHBlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxTQUFTO0FBQ1QsT0FBTyxpQkFBaUIsQ0FBQTtBQUV4QixhQUFhO0FBQ2IsT0FBTyxNQUFNLE1BQU0sV0FBVyxDQUFBO0FBTTlCLFNBQVM7QUFDVCxPQUFPLEVBQUUsT0FBTyxJQUFJLGtCQUFrQixFQUFFLE1BQU0sMEJBQTBCLENBQUE7QUFDeEUsT0FBTyxTQUFTLE1BQU0sd0JBQXdCLENBQUE7QUFFOUMsWUFBWTtBQUNaLE9BQU8sTUFBTSxNQUFNLG1CQUFtQixDQUFBO0FBQ3RDLE9BQU8sRUFBRSxRQUFRLEVBQUUsTUFBTSxvQkFBb0IsQ0FBQTtBQUs3QyxNQUFNLFVBQVUsR0FBRyxNQUFNLENBQ3ZCLE1BQU0sRUFDTixrQkFBa0IsQ0FBQyxTQUFTLENBQUMsRUFDN0IsU0FBUyxDQUNWLENBQUE7QUFLRCxvQkFBb0I7QUFDcEIsZUFBZSxVQUFVLENBQUMsTUFBTSxDQUFDO0lBQy9CLElBQUksRUFBRSxXQUFXO0lBRWpCLE9BQU87UUFDTCxPQUFPO1lBQ0wsU0FBUyxFQUFFLElBQUksQ0FBQyxTQUFTO1lBQ3pCLFVBQVUsRUFBRSxJQUFJLENBQUMsUUFBUTtTQUMxQixDQUFBO0lBQ0gsQ0FBQztJQUVELEtBQUssRUFBRTtRQUNMLFNBQVMsRUFBRSxPQUFPO1FBQ2xCLFNBQVMsRUFBRSxPQUFPO1FBQ2xCLElBQUksRUFBRSxPQUFPO1FBQ2IsUUFBUSxFQUFFLE9BQU87S0FDbEI7SUFFRCxJQUFJO1FBQ0YsTUFBTSxJQUFJLEdBQW9CO1lBQzVCLFFBQVEsRUFBRSxLQUFLO1lBQ2YsS0FBSyxFQUFFLEVBQTRCO1lBQ25DLE9BQU8sRUFBRSxFQUErQjtZQUN4QyxTQUFTLEVBQUUsS0FBSztTQUNqQixDQUFBO1FBRUQsSUFBSSxDQUFDLGlCQUFpQixHQUFHLElB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RyxJQUFJLENBQUMsQ0FBQyxDQUFBO1FBQ25ELENBQUM7UUFDRCxVQUFVO1lBQ1IsS0FBSyxJQUFJLEtBQUssR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRSxFQUFFLEtBQUssSUFBSSxDQUFDLEdBQUc7Z0JBQ2pELElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxhQUFvQixDQUFDLENBQUE7YUFDcEQ7WUFDRCxLQUFLLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxFQUFFLEVBQUUsS0FBSyxJQUFJLENBQUMsR0FBRztnQkFDbkQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLGFBQW9CLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFBO2FBQ3RFO1FBQ0gsQ0FBQztLQUNGO0lBRUQsTUFBTSxDQUFFLENBQUM7UUFDUCxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFO1lBQ2pCLFdBQVcsRUFBRSxXQUFXO1lBQ3hCLEtBQUssRUFBRSxJQUFJLENBQUMsT0FBTztZQUNuQixLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU07U0FDbkIsRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBQ3pCLENBQUM7Q0FDRixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTdHlsZXNcbmltcG9ydCAnLi9WU3RlcHBlci5zYXNzJ1xuXG4vLyBFeHRlbnNpb25zXG5pbXBvcnQgVlNoZWV0IGZyb20gJy4uL1ZTaGVldCdcblxuLy8gQ29tcG9uZW50c1xuaW1wb3J0IFZTdGVwcGVyU3RlcCBmcm9tICcuL1ZTdGVwcGVyU3RlcCdcbmltcG9ydCBWU3RlcHBlckNvbnRlbnQgZnJvbSAnLi9WU3RlcHBlckNvbnRlbnQnXG5cbi8vIE1peGluc1xuaW1wb3J0IHsgcHJvdmlkZSBhcyBSZWdpc3RyYWJsZVByb3ZpZGUgfSBmcm9tICcuLi8uLi9taXhpbnMvcmVnaXN0cmFibGUnXG5pbXBvcnQgUHJveHlhYmxlIGZyb20gJy4uLy4uL21peGlucy9wcm94eWFibGUnXG5cbi8vIFV0aWxpdGllc1xuaW1wb3J0IG1peGlucyBmcm9tICcuLi8uLi91dGlsL21peGlucydcbmltcG9ydCB7IGJyZWFraW5nIH0gZnJvbSAnLi4vLi4vdXRpbC9jb25zb2xlJ1xuXG4vLyBUeXBlc1xuaW1wb3J0IHsgVk5vZGUgfSBmcm9tICd2dWUnXG5cbmNvbnN0IGJhc2VNaXhpbnMgPSBtaXhpbnMoXG4gIFZTaGVldCxcbiAgUmVnaXN0cmFibGVQcm92aWRlKCdzdGVwcGVyJyksXG4gIFByb3h5YWJsZSxcbilcblxudHlwZSBWU3RlcHBlclN0ZXBJbnN0YW5jZSA9IEluc3RhbmNlVHlwZTx0eXBlb2YgVlN0ZXBwZXJTdGVwPlxudHlwZSBWU3RlcHBlckNvbnRlbnRJbnN0YW5jZSA9IEluc3RhbmNlVHlwZTx0eXBlb2YgVlN0ZXBwZXJDb250ZW50PlxuXG4vKiBAdnVlL2NvbXBvbmVudCAqL1xuZXhwb3J0IGRlZmF1bHQgYmFzZU1peGlucy5leHRlbmQoe1xuICBuYW1lOiAndi1zdGVwcGVyJyxcblxuICBwcm92aWRlICgpOiBvYmplY3Qge1xuICAgIHJldHVybiB7XG4gICAgICBzdGVwQ2xpY2s6IHRoaXMuc3RlcENsaWNrLFxuICAgICAgaXNWZXJ0aWNhbDogdGhpcy52ZXJ0aWNhbCxcbiAgICB9XG4gIH0sXG5cbiAgcHJvcHM6IHtcbiAgICBhbHRMYWJlbHM6IEJvb2xlYW4sXG4gICAgbm9uTGluZWFyOiBCb29sZWFuLFxuICAgIGZsYXQ6IEJvb2xlYW4sXG4gICAgdmVydGljYWw6IEJvb2xlYW4sXG4gIH0sXG5cbiAgZGF0YSAoKSB7XG4gICAgY29uc3QgZGF0YTogRGljdGlvbmFyeTxhbnk+ID0ge1xuICAgICAgaXNCb290ZWQ6IGZhbHNlLFxuICAgICAgc3RlcHM6IFtdIGFzIFZTdGVwcGVyU3RlcEluc3RhbmNlW10sXG4gICAgICBjb250ZW50OiBbXSBhcyBWU3RlcHBlckNvbnRlbnRJbnN0YW5jZVtdLFxuICAgICAgaXNSZXZlcnNlOiBmYWxzZSxcbiAgICB9XG5cbiAgICBkYXRhLmludGVybmFsTGF6eVZhbHVlID0gdGhpcy52YWx1ZSAhPSBudWxsXG4gICAgICA/IHRoaXMudmFsdWVcbiAgICAgIDogKGRhdGFbMF0gfHwge30pLnN0ZXAgfHwgMVxuXG4gICAgcmV0dXJuIGRhdGFcbiAgfSxcblxuICBjb21wdXRlZDoge1xuICAgIGNsYXNzZXMgKCk6IG9iamVjdCB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAndi1zdGVwcGVyLS1mbGF0JzogdGhpcy5mbGF0LFxuICAgICAgICAndi1zdGVwcGVyLS1pcy1ib290ZWQnOiB0aGlzLmlzQm9vdGVkLFxuICAgICAgICAndi1zdGVwcGVyLS12ZXJ0aWNhbCc6IHRoaXMudmVydGljYWwsXG4gICAgICAgICd2LXN0ZXBwZXItLWFsdC1sYWJlbHMnOiB0aGlzLmFsdExhYmVscyxcbiAgICAgICAgJ3Ytc3RlcHBlci0tbm9uLWxpbmVhcic6IHRoaXMubm9uTGluZWFyLFxuICAgICAgICAuLi5WU2hlZXQub3B0aW9ucy5jb21wdXRlZC5jbGFzc2VzLmNhbGwodGhpcyksXG4gICAgICB9XG4gICAgfSxcbiAgICBzdHlsZXMgKCk6IG9iamVjdCB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi5WU2hlZXQub3B0aW9ucy5jb21wdXRlZC5zdHlsZXMuY2FsbCh0aGlzKSxcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIHdhdGNoOiB7XG4gICAgaW50ZXJuYWxWYWx1ZSAodmFsLCBvbGRWYWwpIHtcbiAgICAgIHRoaXMuaXNSZXZlcnNlID0gTnVtYmVyKHZhbCkgPCBOdW1iZXIob2xkVmFsKVxuXG4gICAgICBvbGRWYWwgJiYgKHRoaXMuaXNCb290ZWQgPSB0cnVlKVxuXG4gICAgICB0aGlzLnVwZGF0ZVZpZXcoKVxuICAgIH0sXG4gIH0sXG5cbiAgY3JlYXRlZCAoKSB7XG4gICAgLyogaXN0YW5idWwgaWdub3JlIG5leHQgKi9cbiAgICBpZiAodGhpcy4kbGlzdGVuZXJzLmlucHV0KSB7XG4gICAgICBicmVha2luZygnQGlucHV0JywgJ0BjaGFuZ2UnLCB0aGlzKVxuICAgIH1cbiAgfSxcblxuICBtb3VudGVkICgpIHtcbiAgICB0aGlzLnVwZGF0ZVZpZXcoKVxuICB9LFxuXG4gIG1ldGhvZHM6IHtcbiAgICByZWdpc3RlciAoaXRlbTogVlN0ZXBwZXJTdGVwSW5zdGFuY2UgfCBWU3RlcHBlckNvbnRlbnRJbnN0YW5jZSkge1xuICAgICAgaWYgKGl0ZW0uJG9wdGlvbnMubmFtZSA9PT0gJ3Ytc3RlcHBlci1zdGVwJykge1xuICAgICAgICB0aGlzLnN0ZXBzLnB1c2goaXRlbSBhcyBWU3RlcHBlclN0ZXBJbnN0YW5jZSlcbiAgICAgIH0gZWxzZSBpZiAoaXRlbS4kb3B0aW9ucy5uYW1lID09PSAndi1zdGVwcGVyLWNvbnRlbnQnKSB7XG4gICAgICAgIChpdGVtIGFzIFZTdGVwcGVyQ29udGVudEluc3RhbmNlKS5pc1ZlcnRpY2FsID0gdGhpcy52ZXJ0aWNhbFxuICAgICAgICB0aGlzLmNvbnRlbnQucHVzaChpdGVtIGFzIFZTdGVwcGVyQ29udGVudEluc3RhbmNlKVxuICAgICAgfVxuICAgIH0sXG4gICAgdW5yZWdpc3RlciAoaXRlbTogVlN0ZXBwZXJTdGVwSW5zdGFuY2UgfCBWU3RlcHBlckNvbnRlbnRJbnN0YW5jZSkge1xuICAgICAgaWYgKGl0ZW0uJG9wdGlvbnMubmFtZSA9PT0gJ3Ytc3RlcHBlci1zdGVwJykge1xuICAgICAgICB0aGlzLnN0ZXBzID0gdGhpcy5zdGVwcy5maWx0ZXIoKGk6IFZTdGVwcGVyU3RlcEluc3RhbmNlKSA9PiBpICE9PSBpdGVtKVxuICAgICAgfSBlbHNlIGlmIChpdGVtLiRvcHRpb25zLm5hbWUgPT09ICd2LXN0ZXBwZXItY29udGVudCcpIHtcbiAgICAgICAgKGl0ZW0gYXMgVlN0ZXBwZXJDb250ZW50SW5zdGFuY2UpLmlzVmVydGljYWwgPSB0aGlzLnZlcnRpY2FsXG4gICAgICAgIHRoaXMuY29udGVudCA9IHRoaXMuY29udGVudC5maWx0ZXIoKGk6IFZTdGVwcGVyQ29udGVudEluc3RhbmNlKSA9PiBpICE9PSBpdGVtKVxuICAgICAgfVxuICAgIH0sXG4gICAgc3RlcENsaWNrIChzdGVwOiBzdHJpbmcgfCBudW1iZXIpIHtcbiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+ICh0aGlzLmludGVybmFsVmFsdWUgPSBzdGVwKSlcbiAgICB9LFxuICAgIHVwZGF0ZVZpZXcgKCkge1xuICAgICAgZm9yIChsZXQgaW5kZXggPSB0aGlzLnN0ZXBzLmxlbmd0aDsgLS1pbmRleCA+PSAwOykge1xuICAgICAgICB0aGlzLnN0ZXBzW2luZGV4XS50b2dnbGUodGhpcy5pbnRlcm5hbFZhbHVlIGFzIGFueSlcbiAgICAgIH1cbiAgICAgIGZvciAobGV0IGluZGV4ID0gdGhpcy5jb250ZW50Lmxlbmd0aDsgLS1pbmRleCA+PSAwOykge1xuICAgICAgICB0aGlzLmNvbnRlbnRbaW5kZXhdLnRvZ2dsZSh0aGlzLmludGVybmFsVmFsdWUgYXMgYW55LCB0aGlzLmlzUmV2ZXJzZSlcbiAgICAgIH1cbiAgICB9LFxuICB9LFxuXG4gIHJlbmRlciAoaCk6IFZOb2RlIHtcbiAgICByZXR1cm4gaCh0aGlzLnRhZywge1xuICAgICAgc3RhdGljQ2xhc3M6ICd2LXN0ZXBwZXInLFxuICAgICAgY2xhc3M6IHRoaXMuY2xhc3NlcyxcbiAgICAgIHN0eWxlOiB0aGlzLnN0eWxlcyxcbiAgICB9LCB0aGlzLiRzbG90cy5kZWZhdWx0KVxuICB9LFxufSlcbiJdfQ==