import mergeData from '../../util/mergeData';
function mergeTransitions(dest = [], ...transitions) {
    /* eslint-disable-next-line no-array-constructor */
    return Array().concat(dest, ...transitions);
}
export function createSimpleTransition(name, origin = 'top center 0', mode) {
    return {
        name,
        functional: true,
        props: {
            group: {
                type: Boolean,
                default: false,
            },
            hideOnLeave: {
                type: Boolean,
                default: false,
            },
            leaveAbsolute: {
                type: Boolean,
                default: false,
            },
            mode: {
                type: String,
                default: mode,
            },
            origin: {
                type: String,
                default: origin,
            },
        },
        render(h, context) {
            const tag = `transition${context.props.group ? '-group' : ''}`;
            const data = {
                props: {
                    name,
                    mode: context.props.mode,
                },
                on: {
                    beforeEnter(el) {
                        el.style.transformOrigin = context.props.origin;
                        el.style.webkitTransformOrigin = context.props.origin;
                    },
                },
            };
            if (context.props.leaveAbsolute) {
                data.on.leave = mergeTransitions(data.on.leave, (el) => {
                    const { offsetTop, offsetLeft, offsetWidth, offsetHeight } = el;
                    el._transitionInitialStyles = {
                        position: el.style.position,
                        top: el.style.top,
                        left: el.style.left,
                        width: el.style.width,
                        height: el.style.height,
                    };
                    el.style.position = 'absolute';
                    el.style.top = offsetTop + 'px';
                    el.style.left = offsetLeft + 'px';
                    el.style.width = offsetWidth + 'px';
                    el.style.height = offsetHeight + 'px';
                });
                data.on.afterLeave = mergeTransitions(data.on.afterLeave, (el) => {
                    if (el && el._transitionInitialStyles) {
                        const { position, top, left, width, height } = el._transitionInitialStyles;
                        delete el._transitionInitialStyles;
                        el.style.position = position || '';
                        el.style.top = top || '';
                        el.style.left = left || '';
                        el.style.width = width || '';
                        el.style.height = height || '';
                    }
                });
            }
            if (context.props.hideOnLeave) {
                data.on.leave = mergeTransitions(data.on.leave, (el) => {
                    el.style.setProperty('display', 'none', 'important');
                });
            }
            return h(tag, mergeData(context.data, data), context.children);
        },
    };
}
export function createJavascriptTransition(name, functions, mode = 'in-out') {
    return {
        name,
        functional: true,
        props: {
            mode: {
                type: String,
                default: mode,
            },
        },
        render(h, context) {
            return h('transition', mergeData(context.data, {
                props: { name },
                on: functions,
            }), context.children);
        },
    };
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiY3JlYXRlVHJhbnNpdGlvbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uL3NyYy9jb21wb25lbnRzL3RyYW5zaXRpb25zL2NyZWF0ZVRyYW5zaXRpb24udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQ0EsT0FBTyxTQUFTLE1BQU0sc0JBQXNCLENBQUE7QUFFNUMsU0FBUyxnQkFBZ0IsQ0FDdkIsT0FBOEIsRUFBRSxFQUNoQyxHQUFHLFdBQXNDO0lBRXpDLG1EQUFtRDtJQUNuRCxPQUFPLEtBQUssRUFBWSxDQUFDLE1BQU0sQ0FBQyxJQUFJLEVBQUUsR0FBRyxXQUFXLENBQUMsQ0FBQTtBQUN2RCxDQUFDO0FBRUQsTUFBTSxVQUFVLHNCQUFzQixDQUNwQyxJQUFZLEVBQ1osTUFBTSxHQUFHLGNBQWMsRUFDdkIsSUFBYTtJQUViLE9BQU87UUFDTCxJQUFJO1FBRUosVUFBVSxFQUFFLElBQUk7UUFFaEIsS0FBSyxFQUFFO1lBQ0wsS0FBSyxFQUFFO2dCQUNMLElBQUksRUFBRSxPQUFPO2dCQUNiLE9BQU8sRUFBRSxLQUFLO2FBQ2Y7WUFDRCxXQUFXLEVBQUU7Z0JBQ1gsSUFBSSxFQUFFLE9BQU87Z0JBQ2IsT0FBTyxFQUFFLEtBQUs7YUFDZjtZQUNELGFBQWEsRUFBRTtnQkFDYixJQUFJLEVBQUUsT0FBTztnQkFDYixPQUFPLEVBQUUsS0FBSzthQUNmO1lBQ0QsSUFBSSxFQUFFO2dCQUNKLElBQUksRUFBRSxNQUFNO2dCQUNaLE9BQU8sRUFBRSxJQUFJO2FBQ2Q7WUFDRCxNQUFNLEVBQUU7Z0JBQ04sSUFBSSxFQUFFLE1BQU07Z0JBQ1osT0FBTyxFQUFFLE1BQU07YUFDaEI7U0FDRjtRQUVELE1BQU0sQ0FBRSxDQUFDLEVBQUUsT0FBTztZQUNoQixNQUFNLEdBQUcsR0FBRyxhQUFhLE9BQU8sQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFBO1lBQzlELE1B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QUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxNQUFNLEVBQUUsV0FBVyxDQUFDLENBQUE7Z0JBQ3RELENBQUMsQ0FBQyxDQUFBO2FBQ0g7WUFFRCxPQUFPLENBQUMsQ0FBQyxHQUFHLEVBQUUsU0FBUyxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEVBQUUsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFBO1FBQ2hFLENBQUM7S0FDRixDQUFBO0FBQ0gsQ0FBQztBQUVELE1BQU0sVUFBVSwwQkFBMEIsQ0FDeEMsSUFBWSxFQUNaLFNBQThCLEVBQzlCLElBQUksR0FBRyxRQUFRO0lBRWYsT0FBTztRQUNMLElBQUk7UUFFSixVQUFVLEVBQUUsSUFBSTtRQUVoQixLQUFLLEVBQUU7WUFDTCxJQUFJLEVBQUU7Z0JBQ0osSUFBSSxFQUFFLE1BQU07Z0JBQ1osT0FBTyxFQUFFLElBQUk7YUFDZDtTQUNGO1FBRUQsTUFBTSxDQUFFLENBQUMsRUFBRSxPQUFPO1lBQ2hCLE9BQU8sQ0FBQyxDQUNOLFlBQVksRUFDWixTQUFTLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRTtnQkFDdEIsS0FBSyxFQUFFLEVBQUUsSUFBSSxFQUFFO2dCQUNmLEVBQUUsRUFBRSxTQUFTO2FBQ2QsQ0FBQyxFQUNGLE9BQU8sQ0FBQyxRQUFRLENBQ2pCLENBQUE7UUFDSCxDQUFDO0tBQ0YsQ0FBQTtBQUNILENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBGdW5jdGlvbmFsQ29tcG9uZW50T3B0aW9ucywgVk5vZGUsIFZOb2RlRGF0YSB9IGZyb20gJ3Z1ZSdcbmltcG9ydCBtZXJnZURhdGEgZnJvbSAnLi4vLi4vdXRpbC9tZXJnZURhdGEnXG5cbmZ1bmN0aW9uIG1lcmdlVHJhbnNpdGlvbnMgKFxuICBkZXN0OiBGdW5jdGlvbiB8IEZ1bmN0aW9uW10gPSBbXSxcbiAgLi4udHJhbnNpdGlvbnM6IChGdW5jdGlvbiB8IEZ1bmN0aW9uW10pW11cbikge1xuICAvKiBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tYXJyYXktY29uc3RydWN0b3IgKi9cbiAgcmV0dXJuIEFycmF5PEZ1bmN0aW9uPigpLmNvbmNhdChkZXN0LCAuLi50cmFuc2l0aW9ucylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNpbXBsZVRyYW5zaXRpb24gKFxuICBuYW1lOiBzdHJpbmcsXG4gIG9yaWdpbiA9ICd0b3AgY2VudGVyIDAnLFxuICBtb2RlPzogc3RyaW5nXG4pOiBGdW5jdGlvbmFsQ29tcG9uZW50T3B0aW9ucyB7XG4gIHJldHVybiB7XG4gICAgbmFtZSxcblxuICAgIGZ1bmN0aW9uYWw6IHRydWUsXG5cbiAgICBwcm9wczoge1xuICAgICAgZ3JvdXA6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgaGlkZU9uTGVhdmU6IHtcbiAgICAgICAgdHlwZTogQm9vbGVhbixcbiAgICAgICAgZGVmYXVsdDogZmFsc2UsXG4gICAgICB9LFxuICAgICAgbGVhdmVBYnNvbHV0ZToge1xuICAgICAgICB0eXBlOiBCb29sZWFuLFxuICAgICAgICBkZWZhdWx0OiBmYWxzZSxcbiAgICAgIH0sXG4gICAgICBtb2RlOiB7XG4gICAgICAgIHR5cGU6IFN0cmluZyxcbiAgICAgICAgZGVmYXVsdDogbW9kZSxcbiAgICAgIH0sXG4gICAgICBvcmlnaW46IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiBvcmlnaW4sXG4gICAgICB9LFxuICAgIH0sXG5cbiAgICByZW5kZXIgKGgsIGNvbnRleHQpOiBWTm9kZSB7XG4gICAgICBjb25zdCB0YWcgPSBgdHJhbnNpdGlvbiR7Y29udGV4dC5wcm9wcy5ncm91cCA/ICctZ3JvdXAnIDogJyd9YFxuICAgICAgY29uc3QgZGF0YTogVk5vZGVEYXRhID0ge1xuICAgICAgICBwcm9wczoge1xuICAgICAgICAgIG5hbWUsXG4gICAgICAgICAgbW9kZTogY29udGV4dC5wcm9wcy5tb2RlLFxuICAgICAgICB9LFxuICAgICAgICBvbjoge1xuICAgICAgICAgIGJlZm9yZUVudGVyIChlbDogSFRNTEVsZW1lbnQpIHtcbiAgICAgICAgICAgIGVsLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IGNvbnRleHQucHJvcHMub3JpZ2luXG4gICAgICAgICAgICBlbC5zdHlsZS53ZWJraXRUcmFuc2Zvcm1PcmlnaW4gPSBjb250ZXh0LnByb3BzLm9yaWdpblxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICB9XG5cbiAgICAgIGlmIChjb250ZXh0LnByb3BzLmxlYXZlQWJzb2x1dGUpIHtcbiAgICAgICAgZGF0YS5vbiEubGVhdmUgPSBtZXJnZVRyYW5zaXRpb25zKGRhdGEub24hLmxlYXZlLCAoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICAgICAgY29uc3QgeyBvZmZzZXRUb3AsIG9mZnNldExlZnQsIG9mZnNldFdpZHRoLCBvZmZzZXRIZWlnaHQgfSA9IGVsXG4gICAgICAgICAgZWwuX3RyYW5zaXRpb25Jbml0aWFsU3R5bGVzID0ge1xuICAgICAgICAgICAgcG9zaXRpb246IGVsLnN0eWxlLnBvc2l0aW9uLFxuICAgICAgICAgICAgdG9wOiBlbC5zdHlsZS50b3AsXG4gICAgICAgICAgICBsZWZ0OiBlbC5zdHlsZS5sZWZ0LFxuICAgICAgICAgICAgd2lkdGg6IGVsLnN0eWxlLndpZHRoLFxuICAgICAgICAgICAgaGVpZ2h0OiBlbC5zdHlsZS5oZWlnaHQsXG4gICAgICAgICAgfVxuICAgICAgICAgIGVsLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJ1xuICAgICAgICAgIGVsLnN0eWxlLnRvcCA9IG9mZnNldFRvcCArICdweCdcbiAgICAgICAgICBlbC5zdHlsZS5sZWZ0ID0gb2Zmc2V0TGVmdCArICdweCdcbiAgICAgICAgICBlbC5zdHlsZS53aWR0aCA9IG9mZnNldFdpZHRoICsgJ3B4J1xuICAgICAgICAgIGVsLnN0eWxlLmhlaWdodCA9IG9mZnNldEhlaWdodCArICdweCdcbiAgICAgICAgfSlcbiAgICAgICAgZGF0YS5vbiEuYWZ0ZXJMZWF2ZSA9IG1lcmdlVHJhbnNpdGlvbnMoZGF0YS5vbiEuYWZ0ZXJMZWF2ZSwgKGVsPzogSFRNTEVsZW1lbnQpID0+IHtcbiAgICAgICAgICBpZiAoZWwgJiYgZWwuX3RyYW5zaXRpb25Jbml0aWFsU3R5bGVzKSB7XG4gICAgICAgICAgICBjb25zdCB7IHBvc2l0aW9uLCB0b3AsIGxlZnQsIHdpZHRoLCBoZWlnaHQgfSA9IGVsLl90cmFuc2l0aW9uSW5pdGlhbFN0eWxlc1xuICAgICAgICAgICAgZGVsZXRlIGVsLl90cmFuc2l0aW9uSW5pdGlhbFN0eWxlc1xuICAgICAgICAgICAgZWwuc3R5bGUucG9zaXRpb24gPSBwb3NpdGlvbiB8fCAnJ1xuICAgICAgICAgICAgZWwuc3R5bGUudG9wID0gdG9wIHx8ICcnXG4gICAgICAgICAgICBlbC5zdHlsZS5sZWZ0ID0gbGVmdCB8fCAnJ1xuICAgICAgICAgICAgZWwuc3R5bGUud2lkdGggPSB3aWR0aCB8fCAnJ1xuICAgICAgICAgICAgZWwuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0IHx8ICcnXG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgICAgaWYgKGNvbnRleHQucHJvcHMuaGlkZU9uTGVhdmUpIHtcbiAgICAgICAgZGF0YS5vbiEubGVhdmUgPSBtZXJnZVRyYW5zaXRpb25zKGRhdGEub24hLmxlYXZlLCAoZWw6IEhUTUxFbGVtZW50KSA9PiB7XG4gICAgICAgICAgZWwuc3R5bGUuc2V0UHJvcGVydHkoJ2Rpc3BsYXknLCAnbm9uZScsICdpbXBvcnRhbnQnKVxuICAgICAgICB9KVxuICAgICAgfVxuXG4gICAgICByZXR1cm4gaCh0YWcsIG1lcmdlRGF0YShjb250ZXh0LmRhdGEsIGRhdGEpLCBjb250ZXh0LmNoaWxkcmVuKVxuICAgIH0sXG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUphdmFzY3JpcHRUcmFuc2l0aW9uIChcbiAgbmFtZTogc3RyaW5nLFxuICBmdW5jdGlvbnM6IFJlY29yZDxzdHJpbmcsIGFueT4sXG4gIG1vZGUgPSAnaW4tb3V0J1xuKTogRnVuY3Rpb25hbENvbXBvbmVudE9wdGlvbnMge1xuICByZXR1cm4ge1xuICAgIG5hbWUsXG5cbiAgICBmdW5jdGlvbmFsOiB0cnVlLFxuXG4gICAgcHJvcHM6IHtcbiAgICAgIG1vZGU6IHtcbiAgICAgICAgdHlwZTogU3RyaW5nLFxuICAgICAgICBkZWZhdWx0OiBtb2RlLFxuICAgICAgfSxcbiAgICB9LFxuXG4gICAgcmVuZGVyIChoLCBjb250ZXh0KTogVk5vZGUge1xuICAgICAgcmV0dXJuIGgoXG4gICAgICAgICd0cmFuc2l0aW9uJyxcbiAgICAgICAgbWVyZ2VEYXRhKGNvbnRleHQuZGF0YSwge1xuICAgICAgICAgIHByb3BzOiB7IG5hbWUgfSxcbiAgICAgICAgICBvbjogZnVuY3Rpb25zLFxuICAgICAgICB9KSxcbiAgICAgICAgY29udGV4dC5jaGlsZHJlblxuICAgICAgKVxuICAgIH0sXG4gIH1cbn1cbiJdfQ==